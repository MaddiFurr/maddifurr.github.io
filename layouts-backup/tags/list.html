{{ define "main" }}
    <header class="content__header">
        <h1 class="page-title">{{ .Title | markdownify }}</h1>
        {{ .Content }}
    </header>

    {{ range .Pages }}
    <article class="post">
        <header class="post__header">
            <h2 class="post__title"><a href="{{ .Permalink }}">{{ .Title | markdownify }}</a></h2>
            <div class="post__meta">
                <p class="post__author-date">Author: {{ .Params.author }} | Published: {{ .Date.Format "2 January 2006" }}</p>
                {{ if .Params.categories }}
                <p class="post__categories">
                    Categories: 
                    {{ range $index, $category := .Params.categories }}
                        {{- if $index }}, {{ end -}}
                        <a href="{{ "/categories/" | relURL }}{{ $category | urlize }}" class="category-link">{{ $category }}</a>
                    {{ end }}
                </p>
                {{ end }}
            </div>
        </header>

        <section class="post__summary">
            {{ if .Params.description }}
                <p class="post__description">{{ .Params.description }}</p>
            {{ else }}
                {{ .Summary }}
            {{ end }}
        </section>

        {{ if or .Params.tags .Params.series }}
        <div class="post__meta-divider"></div>
        <footer class="post__footer">
            {{ if .Params.tags }}
            <div class="post__tags">
                {{ range .Params.tags }}
                    <a href="{{ "/tags/" | relURL }}{{ . | urlize }}" class="tag">#{{ . }}</a>
                {{ end }}
            </div>
            {{ end }}

            {{ if .Params.series }}
            <div class="post__series">
                <strong>Series:</strong>
                {{ range .Params.series }}
                    <a href="{{ "/series/" | relURL }}{{ . | urlize }}" class="series-link">{{ . }}</a>
                {{ end }}
            </div>
            {{ end }}
        </footer>
        {{ end }}
    </article>
    <hr class="post__separator">
    {{ end }}
{{ end }}

{{define "aside" }}
    {{ if .Params.description }}<p>{{ .Params.description }}</p>{{ end }}
{{ end }}
